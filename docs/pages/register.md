# 등록 페이지 (/register)

> **전체 구조**: [OVERVIEW.md](../OVERVIEW.md) 참조

---

## 1. 페이지 목적

Waiting List 등록 (연락처 수집). 테스트 완료 여부에 따라 플로우가 다름.

---

## 2. 사용자 플로우

### 플로우 A: 등록 → 테스트
```
랜딩페이지 → /#register
    ↓
등록 폼 (연락처 + 동의)
    ↓
등록 완료 + 테스트 시작 안내
    ↓
같은 화면에서 바로 테스트 Part 1 시작
    ↓
테스트 완료 → Result Screen
```

> 등록 완료 후 별도 버튼/페이지 이동 없이 바로 테스트 시작

### 플로우 B: 테스트 → 등록
```
/test 완료 → Result Screen
    ↓
"사용 신청하기" CTA 클릭
    ↓
등록 폼 (연락처 + 동의)
    ↓
등록 완료 (테스트 데이터 자동 포함)
```

> 테스트 완료 후 등록 시 테스트 데이터가 자동 연결됨

---

## 3. 화면별 기능 명세

---

### Register - Form

![Register - Form](../wireframes/labeled/Register%20-%20Form-labeled.png)

> 📁 원본: `docs/wireframes/Wireframe.pen`

---

#### REG-001 폼 헤더

**주요 기능**
등록 유도 메시지 + 사회적 증거

**콘텐츠**
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| - | 제목 | "20만원 상당의 4주 수면 테라피, 무료로 체험하기" | - |
| - | 부제 | "더 빨리 잠들고, 덜 깨고, 더 개운하게" | - |
| REG-001-a | 사회적 증거 | "이미 {N}명이 신청했어요" (동적) | - |

**테스트 시나리오**
- 등록자 수 → 실제 등록자 수 동적 반영

---

#### REG-002 등록 폼 필드

**주요 기능**
연락처 수집 + 동의

**콘텐츠**
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| REG-002-a | 이메일 (필수) | 이메일 형식 검증 | 입력 → 형식 검증 |
| REG-002-b | 휴대폰번호 (선택) | - | 입력 → 저장 |
| REG-002-c | 개인정보 수집 동의 (필수) | 체크박스 | 체크 → 제출 활성화 |

> 추가 정보(성별, 수면 패턴 등)는 테스트에서 수집

**테스트 시나리오**
- 잘못된 이메일 형식 → 에러 메시지
- 필수 항목 미입력 → 버튼 비활성화
- 휴대폰번호 미입력 → 등록 가능
- 동의 체크 안 함 → 버튼 비활성화

---

#### REG-003 제출 처리

**주요 기능**
폼 제출 및 에러 처리

**콘텐츠**
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| REG-003-a | 제출 버튼 | "등록하기" | 클릭 → 성공 화면 |

**테스트 시나리오**
- 정상 제출 → 성공 화면 표시
- 중복 이메일 → 정상 등록 (차단 안 함)
- 입력 오류 → 해당 필드 에러 메시지
- 서버 오류 → 재시도 안내

---

### Register - Success + Test Part 1

![Register - Success](../wireframes/labeled/Register%20-%20Success%20+%20Test%20Part%201-labeled.png)

> 📁 원본: `docs/wireframes/Wireframe.pen`

---

#### REG-004 성공 화면 A (등록 → 테스트)

**주요 기능**
등록 완료 후 테스트 자동 시작

**콘텐츠**
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| - | 완료 메시지 | "등록이 완료되었어요!" | - |
| - | 연결 메시지 | "맞춤형 수면 테라피 제공을 위해 수면 상태를 확인해볼게요" | - |
| - | 테스트 시작 | 바로 Part 1 문항 표시 | 자동 → 테스트 Part 1 |

> 별도의 CTA 버튼 없이 완료 메시지 바로 아래에 테스트 Part 1 문항이 표시됨
>
> 테스트 Part 1 상세: [test.md](./test.md) > TEST-004 참조

**테스트 시나리오**
- 등록 완료 → 완료 메시지 + 테스트 Part 1 자동 표시

---

## 4. 추가 기능 명세

> 아래 명세들은 특정 화면에 국한되지 않는 기능입니다.

---

### REG-005 성공 화면 B (테스트 → 등록)

**주요 기능**
Result Screen 하단 등록 폼 → 완료 메시지 전환

**콘텐츠**
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| - | 상단 | 테스트 결과 영역 (TEST-008 참조) | - |
| - | 하단 | 등록 폼 (연락처 + 동의) | 제출 → 완료 메시지 전환 |
| - | 완료 메시지 | "등록이 완료되었어요! 자리가 나면 연락드릴게요" | - |

> Result Screen 상세: [test.md](./test.md) 참조

**테스트 시나리오**
- Result Screen 하단 → 등록 폼 표시
- 등록 완료 → 폼이 완료 메시지로 전환 (페이지 이동 없음)

---

### REG-006 테스트 데이터 연결

**주요 기능**
테스트 완료 후 등록 시 데이터 자동 포함 (플로우 B)

**연결되는 데이터**
> 테스트 데이터 상세: [test.md](./test.md) 참조

- 수면 고민 선택 항목
- ISI 점수/등급
- 조건부 후속 질문 응답 (해당 시)
- 추가 정보 (ISI 8점+ 사용자)

**테스트 시나리오**
- 플로우 B 등록 완료 → 테스트 데이터가 등록 정보와 연결되어 저장

---

### REG-007 이탈 추적

**주요 기능**
폼 진입 후 이탈 시 마지막 입력 필드 기록

**테스트 시나리오**
- 폼 진입 후 이탈 → 마지막 입력/포커스 필드 기록

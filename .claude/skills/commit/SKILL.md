---
name: commit
description: 구조화된 커밋 메시지를 생성합니다. 명세 변경(docs/pages/*.md) 또는 기타 문서 작업 후 커밋할 때 사용합니다.
argument-hint: [변경 설명]
disable-model-invocation: true
---

# 커밋 생성

변경사항을 분석하여 구조화된 커밋 메시지를 생성한다.

## 언어

커밋 메시지(subject, body)는 **모두 한글**로 작성한다.

## 커밋 유형

커밋은 **명세 변경**과 **기타 작업** 두 가지로 나뉜다.

---

### A. 명세 변경 커밋

`docs/pages/*.md`의 기능 코드(섹션 헤더 `#### CODE-NNN`)가 변경된 경우.

#### 분석

```bash
git diff --cached docs/pages/
```

변경된 섹션 헤더(`#### CODE-NNN`)에서 기능 코드를 수집한다. **여러 기능 코드가 변경된 경우** 기능 코드별로 분할 커밋한다:

1. 기능 코드별로 관련 변경 라인을 분류
2. 첫 번째 기능 코드의 변경만 staging하여 커밋
3. 다음 기능 코드를 staging하여 커밋
4. 모든 기능 코드가 커밋될 때까지 반복

#### 형식

```
<type>(<scope>): <subject>

[SPEC] <CODE-NNN>
[TEAM] <Design|Frontend|Backend>

<body>
```

**커밋 단위 규칙:** 커밋과 기능 코드는 **1:1 관계**이다. 하나의 커밋에 여러 기능 코드를 포함하지 않는다. 단, 하나의 기능 코드가 여러 팀에 영향을 줄 경우 팀별로 별도 커밋을 생성한다.

#### Type

| Type     | 설명                  |
| -------- | --------------------- |
| `feat`   | 새로운 기능 명세 추가 |
| `update` | 기존 기능 명세 수정   |
| `remove` | 기능 명세 삭제        |
| `fix`    | 명세 오류 수정        |

#### Scope

`docs/pages/` 내 변경된 페이지 파일명 (확장자 제외).

#### [SPEC] 라인

**필수.** 변경된 기능 코드 1개를 명시한다. 이 라인은 자동화 파이프라인의 파싱 키로 사용된다.

#### [TEAM] 라인

**필수.** 해당 커밋이 영향을 주는 팀 1개를 명시한다. 하나의 기능 코드가 여러 팀에 영향을 주면 팀별로 커밋을 분리한다.

| 변경 내용                       | 태그     |
| ------------------------------- | -------- |
| 와이어프레임, 레이아웃, UI 요소 | Design   |
| 인터랙션, 콘텐츠 표시, 폼 UI    | Frontend |
| 폼 필드, 데이터 저장, API 연동  | Backend  |

> 하나의 명세가 여러 팀에 영향을 주는 경우 (예: 폼 변경, 점수 계산/분기 로직) 팀별로 별도 커밋을 생성한다.

#### Body

`docs/pages/*.md`에서 해당 `[SPEC]` 코드의 명세를 찾아 상세하게 기재한다. 변경 유형에 따라:

- **new**: 추가된 명세 전체 (콘텐츠 테이블, 인터랙션, 테스트 시나리오)
- **update**: Before/After 비교 (변경 전후 콘텐츠, 인터랙션 차이)
- **remove**: 삭제된 명세 요약

---

### B. 기타 작업 커밋

명세 변경이 아닌 문서/설정/스크립트 등의 작업. `[SPEC]`/`[TEAM]` 라인 없이 일반 커밋 메시지를 사용한다.

#### 형식

```
<type>: <subject>

<body>
```

#### Type

| Type     | 설명                                    |
| -------- | --------------------------------------- |
| `docs`   | 문서 추가/수정 (명세 외)                |
| `chore`  | 설정, 스크립트, 의존성 등 유지보수 작업 |
| `refactor` | 문서 구조 개선, 리팩터링              |

---

## 예시

### 명세 변경 — 기능 추가 (new)

```
feat(register): 소셜 로그인 옵션 추가

[SPEC] REG-002-d
[TEAM] Frontend

콘텐츠:
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| REG-002-d | 소셜 로그인 버튼 | 구글/카카오 로그인 | 클릭 → OAuth 인증 → 등록 완료 |

테스트 시나리오:
- 구글 로그인 클릭 → OAuth 인증 화면 표시
- 카카오 로그인 클릭 → OAuth 인증 화면 표시
- 인증 완료 → 등록 완료 화면 이동
- 인증 취소 → 등록 폼으로 복귀
```

### 명세 변경 — 기능 수정 (update)

```
update(landing): Hero 섹션 CTA 변경

[SPEC] LAND-002-a
[TEAM] Frontend

Before:
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| LAND-002-a | CTA 버튼 | 테스트 시작 CTA | 클릭 → 테스트 페이지 이동 |

After:
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| LAND-002-a | CTA 버튼 | 등록 CTA | 클릭 → 등록 페이지 이동 |

변경 사유: 전환율 개선을 위해 테스트 대신 등록으로 직접 유도
```

### 명세 변경 — 기능 삭제 (remove)

```
remove(test): Part 3 연령대 질문 제거

[SPEC] TEST-006
[TEAM] Frontend

삭제된 명세:
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| TEST-006 | 연령대 선택 | 10대~60대+ 선택지 | 선택 → 다음 질문 |

삭제 사유: ISI 8점+ 사용자 대상 추가 질문 간소화
```

### 명세 변경 — 팀별 커밋 분리 (동일 기능 코드)

하나의 기능 코드가 여러 팀에 영향을 줄 경우 팀별로 커밋을 분리한다:

```
feat(register): 휴대폰번호 선택 필드 UI 추가

[SPEC] REG-002-b
[TEAM] Frontend

콘텐츠:
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| REG-002-b | 휴대폰번호 입력 | 선택 필드 (미입력 가능) | 입력 시 형식 검증 |

테스트 시나리오:
- 휴대폰번호 입력 → 형식 검증 통과 → 등록 가능
- 휴대폰번호 미입력 → 등록 가능 (선택 필드)
- 잘못된 형식 입력 → 오류 메시지 표시
```

```
feat(register): 휴대폰번호 필드 데이터 저장

[SPEC] REG-002-b
[TEAM] Backend

콘텐츠:
| ID | 요소 | 내용 | 인터랙션 |
|----|------|------|----------|
| REG-002-b | 휴대폰번호 입력 | 선택 필드 (미입력 가능) | 입력 시 형식 검증 |

데이터 처리:
- 휴대폰번호 필드 추가 (nullable)
- 등록 API에서 휴대폰번호 수신 및 저장
```

### 기타 작업

```
docs: 디자이너 협업 워크플로우 구축
```

```
chore: 와이어프레임 라벨링 스크립트 의존성 추가
```

## 생성 전 체크리스트

- 명세 변경 커밋: 1커밋 = 1 `[SPEC]` + 1 `[TEAM]`
- 기타 작업 커밋: `[SPEC]`/`[TEAM]` 라인 없음
- 변경유형(type)이 정확함
